<!DOCTYPE html>

<html>
  <head>
    <title>nodekick</title>
    <script src="/bower_components/jquery/jquery.js"></script>
    <script src="/bower_components/underscore/underscore.js"></script>
    <script src="/bower_components/pixi/bin/pixi.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/public/app/app.js"></script>
    <script src="/common/gravity.js"></script>
    <script src="/public/app/assets.js"></script>
    <script src="/public/app/playerSprites.js"></script>
    <script src="/public/app/deathAnimations.js"></script>
    <script src="/public/app/drawer.js"></script>
    <script src="/public/app/gameProxy.js"></script>
    <script src="/public/app/gamepad.js"></script>
    <script src="/public/app/ai.js"></script>
    <script src="/public/app/index.js"></script>
  </head>
  <body>
    <div id="stage" style="border: solid 1px silver; width: 1280px">
    </div>
    <div>
      <h3>Instructions for multiplayer fighting game (bring your friends)</h3>
      <ul>
        <li>Press the <strong>up arrow</strong> on your keyboard to <strong>spawn a fighter</strong>.</li>
        <li><strong>While standing</strong>, press the <strong>up arrow</strong> on your keyboard to <strong>to jump</strong>.</li>
        <li><strong>While in the air</strong>, press the <strong>left or right arrow</strong> keys on your keyboard to <strong>attack left and right</strong>.</li>
        <li><strong>While standing</strong>, press the <strong>down arrow</strong> on your keyboard to <strong>jump backwards</strong>.</li>
        <li><strong>While standing</strong>, press the <strong>left or right arrow</strong> keys on your keyboard to <strong>change the direction you are facing</strong>.</li>
      </ul>
    </div>
    <% if(ai) { %>
    <div style="float: left; border: solid 1px silver; padding: 3px; margin-top: 10px;">
      <textarea id="ai" rows="20" cols="55" style="border: none; font-size: 16px; font-family: monospace;">
      </textarea><br/>
      <hr/>
      <input type="button" id="loadScript" value="start bot" />
      <input type="button" id="loadDefault" value="load default script" />
    </div>
    <% } %>
    <script id="defaultAIScript" type="aiscript">
(function() {
  function tick(you, them) {
    //if you is false, then you are
    //not spawned at this point
    //return up, left or right to spawn
    if(you) {
      return "up";
    }
    //console.log(you);
    //console.log(them);
    //return "left";
    //return "right";
    //return "down";
    //return false;
    return "up";
  }

  app.ai = { };
  app.ai.tick = tick;
})();
    </script>
    <script>
      function loadDefaultAIScript() {
        $("#ai").val($("#defaultAIScript").html());
      }
      
      $(function() {
        if(localStorage.ai) {
          $("#ai").val(localStorage.ai);
        } else {
          loadDefaultAIScript();
        }
        
        $("#loadDefault").click(function() {
          loadDefaultAIScript();
        });

        $("#loadScript").click(function() {
          $(".ai").remove();
          var code = $("#ai").val();
          localStorage.ai = code;
          var scriptToAppend = $('<script class="ai"><\/script>');
          scriptToAppend.html(code);
          scriptToAppend.appendTo("body");
        });
      });

    </script>
  </body>
</html>
